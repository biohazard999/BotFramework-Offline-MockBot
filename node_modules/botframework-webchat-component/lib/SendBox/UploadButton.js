"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.connectUploadButton = exports.default = void 0;

var _glamor = require("glamor");

var _classnames = _interopRequireDefault(require("classnames"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _react = _interopRequireDefault(require("react"));

var _Localize = require("../Localization/Localize");

var _AttachmentIcon = _interopRequireDefault(require("./Assets/AttachmentIcon"));

var _connectToWebChat = _interopRequireDefault(require("../connectToWebChat"));

var _IconButton = _interopRequireDefault(require("./IconButton"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

var ROOT_CSS = (0, _glamor.css)({
  overflow: 'hidden',
  position: 'relative',
  '& > input': {
    height: 0,
    width: 0,
    opacity: 0,
    position: 'absolute',
    left: 0,
    top: 0
  }
});

var connectUploadButton = function connectUploadButton() {
  for (var _len = arguments.length, selectors = new Array(_len), _key = 0; _key < _len; _key++) {
    selectors[_key] = arguments[_key];
  }

  return _connectToWebChat.default.apply(void 0, [function (_ref) {
    var disabled = _ref.disabled,
        language = _ref.language,
        _sendFiles = _ref.sendFiles;
    return {
      disabled: disabled,
      language: language,
      sendFiles: function sendFiles(files) {
        if (files && files.length) {
          // TODO: [P3] We need to find revokeObjectURL on the UI side
          //       Redux store should not know about the browser environment
          //       One fix is to use ArrayBuffer instead of object URL, but that would requires change to DirectLineJS
          _sendFiles([].map.call(files, function (file) {
            return {
              name: file.name,
              size: file.size,
              url: window.URL.createObjectURL(file)
            };
          }));
        }
      }
    };
  }].concat(selectors));
};

exports.connectUploadButton = connectUploadButton;

var UploadButton =
/*#__PURE__*/
function (_React$Component) {
  _inherits(UploadButton, _React$Component);

  function UploadButton(props) {
    var _this;

    _classCallCheck(this, UploadButton);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(UploadButton).call(this, props));
    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_this));
    _this.handleFileChange = _this.handleFileChange.bind(_assertThisInitialized(_this));
    _this.inputRef = _react.default.createRef();
    return _this;
  }

  _createClass(UploadButton, [{
    key: "handleClick",
    value: function handleClick() {
      var current = this.inputRef.current;
      current && current.click();
    }
  }, {
    key: "handleFileChange",
    value: function handleFileChange(_ref2) {
      var files = _ref2.target.files;
      var sendFiles = this.props.sendFiles;
      sendFiles(files);
      var current = this.inputRef.current;

      if (current) {
        current.value = null;
      }
    }
  }, {
    key: "render",
    value: function render() {
      var _this$props = this.props,
          disabled = _this$props.disabled,
          language = _this$props.language,
          styleSet = _this$props.styleSet;
      var uploadFileString = (0, _Localize.localize)('Upload file', language);
      return _react.default.createElement("div", {
        className: (0, _classnames.default)(ROOT_CSS + '', styleSet.uploadButton + '')
      }, _react.default.createElement("input", {
        "aria-hidden": "true",
        disabled: disabled,
        multiple: true,
        onChange: this.handleFileChange,
        ref: this.inputRef,
        role: "button",
        tabIndex: -1,
        type: "file"
      }), _react.default.createElement(_IconButton.default, {
        alt: uploadFileString,
        "aria-label": uploadFileString,
        disabled: disabled,
        onClick: this.handleClick
      }, _react.default.createElement(_AttachmentIcon.default, null)));
    }
  }]);

  return UploadButton;
}(_react.default.Component);

UploadButton.defaultProps = {
  disabled: false
};
UploadButton.propTypes = {
  disabled: _propTypes.default.bool,
  language: _propTypes.default.string.isRequired,
  sendFiles: _propTypes.default.func.isRequired,
  styleSet: _propTypes.default.shape({
    uploadButton: _propTypes.default.any.isRequired
  }).isRequired
};

var _default = connectUploadButton(function (_ref3) {
  var styleSet = _ref3.styleSet;
  return {
    styleSet: styleSet
  };
})(UploadButton);

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9TZW5kQm94L1VwbG9hZEJ1dHRvbi5qcyJdLCJuYW1lcyI6WyJST09UX0NTUyIsIm92ZXJmbG93IiwicG9zaXRpb24iLCJoZWlnaHQiLCJ3aWR0aCIsIm9wYWNpdHkiLCJsZWZ0IiwidG9wIiwiY29ubmVjdFVwbG9hZEJ1dHRvbiIsInNlbGVjdG9ycyIsImNvbm5lY3RUb1dlYkNoYXQiLCJkaXNhYmxlZCIsImxhbmd1YWdlIiwic2VuZEZpbGVzIiwiZmlsZXMiLCJsZW5ndGgiLCJtYXAiLCJjYWxsIiwiZmlsZSIsIm5hbWUiLCJzaXplIiwidXJsIiwid2luZG93IiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiVXBsb2FkQnV0dG9uIiwicHJvcHMiLCJoYW5kbGVDbGljayIsImJpbmQiLCJoYW5kbGVGaWxlQ2hhbmdlIiwiaW5wdXRSZWYiLCJSZWFjdCIsImNyZWF0ZVJlZiIsImN1cnJlbnQiLCJjbGljayIsInRhcmdldCIsInZhbHVlIiwic3R5bGVTZXQiLCJ1cGxvYWRGaWxlU3RyaW5nIiwidXBsb2FkQnV0dG9uIiwiQ29tcG9uZW50IiwiZGVmYXVsdFByb3BzIiwicHJvcFR5cGVzIiwiUHJvcFR5cGVzIiwiYm9vbCIsInN0cmluZyIsImlzUmVxdWlyZWQiLCJmdW5jIiwic2hhcGUiLCJhbnkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVBLElBQU1BLFFBQVEsR0FBRyxpQkFBSTtBQUNuQkMsRUFBQUEsUUFBUSxFQUFFLFFBRFM7QUFFbkJDLEVBQUFBLFFBQVEsRUFBRSxVQUZTO0FBSW5CLGVBQWE7QUFDWEMsSUFBQUEsTUFBTSxFQUFFLENBREc7QUFFWEMsSUFBQUEsS0FBSyxFQUFFLENBRkk7QUFHWEMsSUFBQUEsT0FBTyxFQUFFLENBSEU7QUFJWEgsSUFBQUEsUUFBUSxFQUFFLFVBSkM7QUFLWEksSUFBQUEsSUFB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QVJQLFFBREYsRUFXRSw2QkFBQyxtQkFBRDtBQUFZLFFBQUEsR0FBRyxFQUFFUSxnQkFBakI7QUFBbUMsc0JBQVlBLGdCQUEvQztBQUFpRSxRQUFBLFFBQVEsRUFBRTNCLFFBQTNFO0FBQXFGLFFBQUEsT0FBTyxFQUFFLEtBQUtnQjtBQUFuRyxTQUNFLDZCQUFDLHVCQUFELE9BREYsQ0FYRixDQURGO0FBaUJEOzs7O0VBaER3QkksZUFBTVMsUzs7QUFtRGpDZixZQUFZLENBQUNnQixZQUFiLEdBQTRCO0FBQzFCOUIsRUFBQUEsUUFBUSxFQUFFO0FBRGdCLENBQTVCO0FBSUFjLFlBQVksQ0FBQ2lCLFNBQWIsR0FBeUI7QUFDdkIvQixFQUFBQSxRQUFRLEVBQUVnQyxtQkFBVUMsSUFERztBQUV2QmhDLEVBQUFBLFFBQVEsRUFBRStCLG1CQUFVRSxNQUFWLENBQWlCQyxVQUZKO0FBR3ZCakMsRUFBQUEsU0FBUyxFQUFFOEIsbUJBQVVJLElBQVYsQ0FBZUQsVUFISDtBQUl2QlQsRUFBQUEsUUFBUSxFQUFFTSxtQkFBVUssS0FBVixDQUFnQjtBQUN4QlQsSUFBQUEsWUFBWSxFQUFFSSxtQkFBVU0sR0FBVixDQUFjSDtBQURKLEdBQWhCLEVBRVBBO0FBTm9CLENBQXpCOztlQVNldEMsbUJBQW1CLENBQUM7QUFBQSxNQUFHNkIsUUFBSCxTQUFHQSxRQUFIO0FBQUEsU0FBbUI7QUFBRUEsSUFBQUEsUUFBUSxFQUFSQTtBQUFGLEdBQW5CO0FBQUEsQ0FBRCxDQUFuQixDQUFzRFosWUFBdEQsQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNzcyB9IGZyb20gJ2dsYW1vcic7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBsb2NhbGl6ZSB9IGZyb20gJy4uL0xvY2FsaXphdGlvbi9Mb2NhbGl6ZSc7XG5pbXBvcnQgQXR0YWNobWVudEljb24gZnJvbSAnLi9Bc3NldHMvQXR0YWNobWVudEljb24nO1xuaW1wb3J0IGNvbm5lY3RUb1dlYkNoYXQgZnJvbSAnLi4vY29ubmVjdFRvV2ViQ2hhdCc7XG5pbXBvcnQgSWNvbkJ1dHRvbiBmcm9tICcuL0ljb25CdXR0b24nO1xuXG5jb25zdCBST09UX0NTUyA9IGNzcyh7XG4gIG92ZXJmbG93OiAnaGlkZGVuJyxcbiAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG5cbiAgJyYgPiBpbnB1dCc6IHtcbiAgICBoZWlnaHQ6IDAsXG4gICAgd2lkdGg6IDAsXG4gICAgb3BhY2l0eTogMCxcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICBsZWZ0OiAwLFxuICAgIHRvcDogMFxuICB9XG59KTtcblxuY29uc3QgY29ubmVjdFVwbG9hZEJ1dHRvbiA9ICguLi5zZWxlY3RvcnMpID0+XG4gIGNvbm5lY3RUb1dlYkNoYXQoXG4gICAgKHsgZGlzYWJsZWQsIGxhbmd1YWdlLCBzZW5kRmlsZXMgfSkgPT4gKHtcbiAgICAgIGRpc2FibGVkLFxuICAgICAgbGFuZ3VhZ2UsXG4gICAgICBzZW5kRmlsZXM6IGZpbGVzID0+IHtcbiAgICAgICAgaWYgKGZpbGVzICYmIGZpbGVzLmxlbmd0aCkge1xuICAgICAgICAgIC8vIFRPRE86IFtQM10gV2UgbmVlZCB0byBmaW5kIHJldm9rZU9iamVjdFVSTCBvbiB0aGUgVUkgc2lkZVxuICAgICAgICAgIC8vICAgICAgIFJlZHV4IHN0b3JlIHNob3VsZCBub3Qga25vdyBhYm91dCB0aGUgYnJvd3NlciBlbnZpcm9ubWVudFxuICAgICAgICAgIC8vICAgICAgIE9uZSBmaXggaXMgdG8gdXNlIEFycmF5QnVmZmVyIGluc3RlYWQgb2Ygb2JqZWN0IFVSTCwgYnV0IHRoYXQgd291bGQgcmVxdWlyZXMgY2hhbmdlIHRvIERpcmVjdExpbmVKU1xuICAgICAgICAgIHNlbmRGaWxlcyhcbiAgICAgICAgICAgIFtdLm1hcC5jYWxsKGZpbGVzLCBmaWxlID0+ICh7XG4gICAgICAgICAgICAgIG5hbWU6IGZpbGUubmFtZSxcbiAgICAgICAgICAgICAgc2l6ZTogZmlsZS5zaXplLFxuICAgICAgICAgICAgICB1cmw6IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSksXG4gICAgLi4uc2VsZWN0b3JzXG4gICk7XG5cbmNsYXNzIFVwbG9hZEJ1dHRvbiBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuXG4gICAgdGhpcy5oYW5kbGVDbGljayA9IHRoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKTtcbiAgICB0aGlzLmhhbmRsZUZpbGVDaGFuZ2UgPSB0aGlzLmhhbmRsZUZpbGVDaGFuZ2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLmlucHV0UmVmID0gUmVhY3QuY3JlYXRlUmVmKCk7XG4gIH1cblxuICBoYW5kbGVDbGljaygpIHtcbiAgICBjb25zdCB7IGN1cnJlbnQgfSA9IHRoaXMuaW5wdXRSZWY7XG5cbiAgICBjdXJyZW50ICYmIGN1cnJlbnQuY2xpY2soKTtcbiAgfVxuXG4gIGhhbmRsZUZpbGVDaGFuZ2UoeyB0YXJnZXQ6IHsgZmlsZXMgfSB9KSB7XG4gICAgY29uc3QgeyBzZW5kRmlsZXMgfSA9IHRoaXMucHJvcHM7XG5cbiAgICBzZW5kRmlsZXMoZmlsZXMpO1xuXG4gICAgY29uc3QgeyBjdXJyZW50IH0gPSB0aGlzLmlucHV0UmVmO1xuXG4gICAgaWYgKGN1cnJlbnQpIHtcbiAgICAgIGN1cnJlbnQudmFsdWUgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGRpc2FibGVkLCBsYW5ndWFnZSwgc3R5bGVTZXQgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgdXBsb2FkRmlsZVN0cmluZyA9IGxvY2FsaXplKCdVcGxvYWQgZmlsZScsIGxhbmd1YWdlKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcyhST09UX0NTUyArICcnLCBzdHlsZVNldC51cGxvYWRCdXR0b24gKyAnJyl9PlxuICAgICAgICA8aW5wdXRcbiAgICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIlxuICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgICBtdWx0aXBsZT17dHJ1ZX1cbiAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVGaWxlQ2hhbmdlfVxuICAgICAgICAgIHJlZj17dGhpcy5pbnB1dFJlZn1cbiAgICAgICAgICByb2xlPVwiYnV0dG9uXCJcbiAgICAgICAgICB0YWJJbmRleD17LTF9XG4gICAgICAgICAgdHlwZT1cImZpbGVcIlxuICAgICAgICAvPlxuICAgICAgICA8SWNvbkJ1dHRvbiBhbHQ9e3VwbG9hZEZpbGVTdHJpbmd9IGFyaWEtbGFiZWw9e3VwbG9hZEZpbGVTdHJpbmd9IGRpc2FibGVkPXtkaXNhYmxlZH0gb25DbGljaz17dGhpcy5oYW5kbGVDbGlja30+XG4gICAgICAgICAgPEF0dGFjaG1lbnRJY29uIC8+XG4gICAgICAgIDwvSWNvbkJ1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxuVXBsb2FkQnV0dG9uLmRlZmF1bHRQcm9wcyA9IHtcbiAgZGlzYWJsZWQ6IGZhbHNlXG59O1xuXG5VcGxvYWRCdXR0b24ucHJvcFR5cGVzID0ge1xuICBkaXNhYmxlZDogUHJvcFR5cGVzLmJvb2wsXG4gIGxhbmd1YWdlOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gIHNlbmRGaWxlczogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgc3R5bGVTZXQ6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgdXBsb2FkQnV0dG9uOiBQcm9wVHlwZXMuYW55LmlzUmVxdWlyZWRcbiAgfSkuaXNSZXF1aXJlZFxufTtcblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdFVwbG9hZEJ1dHRvbigoeyBzdHlsZVNldCB9KSA9PiAoeyBzdHlsZVNldCB9KSkoVXBsb2FkQnV0dG9uKTtcblxuZXhwb3J0IHsgY29ubmVjdFVwbG9hZEJ1dHRvbiB9O1xuIl19